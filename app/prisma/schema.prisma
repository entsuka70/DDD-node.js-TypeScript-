// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model setupData {
    id String @id
    required Boolean
    number Int @db.SmallInt
}

model User {
    id Int @id @default(autoincrement())
    user_issue_id Int
    user_name String
    email String @unique
    belongs_id Int @default(0)
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    userIssue UserIssue[]
    belong Belong @relation(fields: [belongs_id], references: [id])
    pair Pair @relation(fields: [id], references: [id])
}

model Belong {
    id Int @id @default(autoincrement())
    belong Int
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    user User?
}

model UserIssue {
    id Int @id @default(autoincrement())
    user_id Int
    issue_id Int
    progress Int
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    user User @relation(fields: [user_id], references: [id])
    issue Issue @relation(fields: [issue_id], references: [id])
}

model Issue {
    id Int @id @default(autoincrement())
    user_issue_id Int
    issue_name String
    issue_group_id Int
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    userIssue UserIssue[]
    issueGroup IssueGroup @relation(fields: [issue_group_id], references: [id])
}

model IssueGroup {
    id Int @id @default(autoincrement())
    issue_group Int
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
    
    issue Issue? 
}

model Pair {
    id Int @id @default(autoincrement())
    pair_name String
    teams_id Int
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    user User[]
    team Team @relation(fields: [teams_id], references: [id])
}

model Team {
    id Int @id @default(autoincrement())
    team_name String
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    pair Pair[]
}